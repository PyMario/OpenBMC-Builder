name: Debuger
on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-20.04

    steps:
      - name: apt
        run: sudo apt-get install gawk wget diffstat unzip texinfo gcc-multilib build-essential chrpath socat cpio python python3 python3-pip python3-pexpect xz-utils debianutils iputils-ping libsdl1.2-dev xterm

      - uses: actions/checkout@v4
        with:
          repository: 'facebook/openbmc'
          ref: helium 

      - name: ConfigGit
        run:
          git config --global user.name "PyMario"
          git config --global user.email "2426525089@qq.com"
          
      - name: sync
        run: ./sync_yocto.sh

      - name: source
        run: source openbmc-init-build-env yosemite

      - name: bitbake
        run: bitbake yosemite-image
